buildscript {
    repositories { maven { url "https://plugins.gradle.org/m2/" } }
    dependencies { classpath 'com.gradle.publish:plugin-publish-plugin:0.9.7' }
}

plugins {
    id 'groovy'
    id 'maven'
    id 'maven-publish'
    id 'net.researchgate.release' version '2.6.0'
    id 'com.gradle.plugin-publish' version '0.9.7'
}

group = 'com.cfnstacks.gradle'
description = 'ArtifactS3 Gradle plugin'

// Library Versions
ext {
    amazonSdkVersion = '1.11.172'
    gradleWrapperVersion = '4.0.2'
    junitVersion = '4.12'
}

dependencies {
    compile gradleApi()
    compile "com.amazonaws:aws-java-sdk:$amazonSdkVersion"
    testCompile gradleTestKit()
    testCompile "junit:junit:$junitVersion"
}

pluginBundle {
    website = 'https://cfn-stacks.com'
    vcsUrl = 'https://github.com/cfn-stacks/artifacts3-plugin'
    description = 'Plugin to publish to an ArtifactS3 repo'
    tags = ['artifacts', 'maven-publish', 's3']

    plugins {
        artifacts3Plugin {
            id = 'com.cfnstacks.gradle.artifacts3'
            displayName = 'ArtifactS3 Repo Publishing'
        }
    }
}

release {
    tagTemplate = 'v${version}'
}

repositories {
    jcenter()
    mavenLocal()
}

task wrapper(type: Wrapper) {
    gradleVersion = gradleWrapperVersion
}